<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic SEO & mobile setup -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CSC Nurse Vacancies â€“ Health Jobs PH</title>
  <meta name="description" content="Browse the latest government CSC nurse vacancies in Luzon, Visayas, and Mindanao. Free, up-to-date listings to help Filipino nurses find their next role.">
  <link rel="canonical" href="https://marvfaj.github.io/healthjobsph/">
  
  <!-- Open Graph tags -->
  <meta property="og:title" content="CSC Nurse Vacancies â€“ Health Jobs PH">
  <meta property="og:description" content="Free, live listings of CSC nurse job openings across Luzon, Visayas, and Mindanao. Find your next government nursing role today.">
  <meta property="og:url" content="https://marvfaj.github.io/healthjobsph/">
  <meta property="og:type" content="website">
  
  <!-- Your custom CSS -->
  <link rel="stylesheet" href="styles.css">

  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

  <style>
    .btn-group { margin: 1em 0; }
    .btn-group button { margin-right: 5px; padding: 6px 12px; cursor: pointer; }
    .btn-group button.active { background-color: #007BFF; color: white; }
    .faded { opacity: 0.5; cursor: not-allowed; }
  </style>
</head>

<body>
  <header>
    <h1>CSC Nurse Vacancies</h1>
    <!-- Optional navigation retained for structure -->
    <!-- Navigation now non-clickable; replaced by filter buttons -->
    <nav class="btn-group">
      <button data-filter="All" class="active">All</button>
      <button data-filter="Luzon">Luzon</button>
      <button data-filter="Visayas">Visayas</button>
      <button data-filter="Mindanao">Mindanao</button>
    </nav>
  </header>

  <main>
    <h2>Health Jobs PH â€“ Government Nurse Openings</h2>
    <p>Filter by island group to view the latest CSC nurse vacancies.</p>

    <!-- Optional 2: Export and Highlight buttons -->
    <div class="btn-group">
      <button onclick="downloadCSV()">â¬‡ Export Filtered CSV</button>
      <button onclick="highlightSoon()">âš  Highlight Closing Soon</button>
      <button class="faded" disabled>ðŸ”’ Option 4 (Coming Soon)</button>
    </div>

    <table id="jobs-table" class="display" style="width:100%">
      <thead>
        <tr>
          <th>Office</th>
          <th>Position</th>
          <th>Closing Date</th>
          <th>Details</th>
        </tr>
      </thead>

      <!-- Paste in jobs_all_rows.html here -->
      {{ include 'jobs_all_rows.html' }}
    </table>
  </main>

  <footer>
    Â© 2025 Health Jobs PH
  </footer>

  <!-- JavaScript -->
  <script>
    // Main filter and DataTable setup
    $(document).ready(function () {
      window.table = $('#jobs-table').DataTable();

      $('.btn-group button[data-filter]').on('click', function () {
        var filter = $(this).data('filter');
        $('.btn-group button[data-filter]').removeClass('active');
        $(this).addClass('active');

        $('#jobs-table tbody tr').each(function () {
          var island = $(this).data('island');
          if (filter === 'All' || island === filter) {
            $(this).show();
          } else {
            $(this).hide();
          }
        });
      });
    });

    // Export filtered table to CSV (Option 2)
    function downloadCSV() {
      let rows = [];
      $('#jobs-table thead tr').each(function () {
        let cols = $(this).find('th').map((_, th) => $(th).text()).get();
        rows.push(cols);
      });
      $('#jobs-table tbody tr:visible').each(function () {
        let cols = $(this).find('td').map((_, td) => `"${$(td).text().trim()}"`).get();
        rows.push(cols);
      });
      let csv = rows.map(row => row.join(',')).join('\n');
      let blob = new Blob([csv], { type: 'text/csv' });
      let url = URL.createObjectURL(blob);
      let a = document.createElement('a');
      a.href = url;
      a.download = 'csc_jobs_filtered.csv';
      a.click();
    }

    // Highlight rows closing in 7 days (Option 3)
    function highlightSoon() {
      const today = new Date();
      $('#jobs-table tbody tr:visible').each(function () {
        const dateStr = $(this).find('td:nth-child(3)').text();
        const jobDate = new Date(dateStr + " 00:00:00");
        const diff = (jobDate - today) / (1000 * 60 * 60 * 24);
        if (diff <= 7) {
          $(this).css('background-color', '#fff3cd');
        }
      });
    }
  </script>
</body>
</html>
